<% layout("layouts/boilerplate") %>

<style>
  /* Booking Container */

  .booking-container {
    min-height: 100vh;
    background-color: #f8fafc;
  }

  /* Header Section */
  .booking-header {
    background: white;
    padding: 1.5rem 2rem;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    align-items: center;
    gap: 1rem;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .back-btn {
    background: none;
    border: none;
    color: #64748b;
    font-size: 1.25rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
  }

  .back-btn:hover {
    background-color: #f1f5f9;
    color: #334155;
  }

  .header-content {
    margin-left: 2rem;
  }

  .booking-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: #344256;
    margin: 0 0 0.25rem 0;
  }

  .booking-subtitle {
    color: #64748b;
    margin: 0;
    font-size: 1rem;
  }

  /* Booking Requirements */
  .booking-requirements {
    padding: 1.5rem 2rem;
  }

  .requirement-card {
    background: #0da2e70d;
    border: 1px solid #0da2e733;
    border-radius: 0.75rem;
    padding: 1rem 1.25rem;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    color: #344256;
  }

  .requirement-card i {
    font-size: 1.25rem;
    margin-top: 0.125rem;
    flex-shrink: 0;
  }

  .requirement-content {
    font-size: 0.95rem;
    line-height: 1.5;
  }

  .requirement-content strong {
    font-weight: 600;
  }

  /* Main Content Layout */
  .main-content {
    display: grid;
    grid-template-columns: 400px 1fr;
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem 2rem 2rem;
  }

  /* Booking Summary (Left Side) */
  .booking-summary-container {
    position: sticky;
    top: 120px;
    height: fit-content;
    color: #344256;
  }

  .booking-summary {
    color: #344256;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid #e2e8f0;
  }

  .summary-header {
    background-color: #0da2e7;
    color: white;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .summary-header i {
    font-size: 1.25rem;
  }

  .summary-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0;
  }

  .package-info {
    padding: 1.5rem;
    border-bottom: 1px solid #f1f5f9;
  }

  .package-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: #344256;
    margin: 0 0 0.5rem 0;
    line-height: 1.4;
  }

  .package-type {
    background-color: #0da2e7;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 5px;
    border: 1px solid #0da2e7;
    font-size: 0.8rem;
    font-weight: 500;
    display: inline-block;
    margin-bottom: 0.75rem;
  }

  .package-location,
  .package-duration {
    color: #64748b;
    font-size: 0.9rem;
    margin: 0.25rem 0;
    margin: 0% !important;
  }

  .price-summary {
    padding: 1.5rem;
  }

  .price-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.2rem;
    font-size: 0.95rem;
  }

  .price {
    font-weight: 600;
    color: #344256;
  }

  .divider {
    border: none;
    border-top: 1px solid #344256;
    margin: 0.75rem 0;
  }

  .price-row.total {
    /* padding-top: 0.75rem; */
    font-size: 1.1rem;
  }

  .total-price {
    color: #344256;
    font-size: 1.25rem;
  }

  /* Form Container (Right Side) */
  /* .form-container {
  display: flex;
  flex-direction: column;


} */

  /* Form Sections */
  .form-section {
    background: white;
    border-radius: 1rem;
    padding: 1.2rem;

    border: 1px solid #e2e8f0;
    margin-bottom: 2rem;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 0.5em;

    margin-bottom: 1.25rem;
  }

  .section-header i {
    color: #3b82f6;
    font-size: 1.25rem;
  }

  .section-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #344256;
    margin: 0;
  }

  /* Form Grid and Groups */
  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .form-grid:last-child {
    margin-bottom: 0;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    font-weight: 500;
    color: #344256;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
  }

  .required {
    color: #ef4444;
    font-weight: 600;
  }

  /* Form Controls */
  input,
  select,
  textarea {
    padding: 0.5rem;

    border: 1.5px solid #e2e8f0;
    border-radius: 0.5rem;
    font-size: 1rem;
    transition: all 0.2s ease;
    font-size: 14px;
  }

  input:focus,
  select:focus,
  textarea:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  input.error,
  select.error,
  textarea.error {
    border-color: #ef4444;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
  }

  input::placeholder,
  textarea::placeholder {
    color: #9ca3af;
  }

  .guests-dropdown {
    cursor: pointer;
  }

  textarea {
    resize: vertical;
    min-height: 100px;
  }

  .error-message {
    color: #ef4444;
    font-size: 0.875rem;
    margin-top: 0.25rem;
    font-weight: 500;
  }

  /* Form Footer */
  .form-footer {
    background: white;
    border-radius: 1rem;
    padding: 1.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid #e2e8f0;
  }

  .terms-text {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.75rem;
    padding: 1rem;
    font-size: 0.9rem;
    color: #64748b;
    margin: 0 0 1.5rem 0;
    line-height: 1.5;
  }

  .action-buttons {
    display: flex;
    gap: 1rem;
  }

  .btn-cancel,
  .btn-confirm {
    flex: 1;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-family: inherit;
  }

  .btn-cancel {
    background: white;
    color: #64748b;
    border: 2px solid #e2e8f0;
  }

  .btn-cancel:hover:not(:disabled) {
    background: #f8fafc;
    border-color: #cbd5e1;
    color: #475569;
  }

  .btn-confirm {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.2);
  }

  .btn-confirm:hover:not(:disabled) {
    background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
  }

  .btn-confirm:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Loading State */
  .loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 50vh;
    text-align: center;
    color: #64748b;
  }

  .loading-state i {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #3b82f6;
  }

  .section-header i {
    color: #0da2e7;
  }

  /* Responsive Design */
  @media (max-width: 1200px) {
    .main-content {
      grid-template-columns: 350px 1fr;
      gap: 1.5rem;
    }
  }

  @media (max-width: 1024px) {
    .main-content {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .booking-summary-container {
      position: static;
      order: -1;
    }
  }

  @media (max-width: 768px) {
    .booking-header {
      padding: 1rem;
    }

    .booking-title {
      font-size: 1.5rem;
    }

    .booking-requirements {
      padding: 1rem;
    }

    .main-content {
      padding: 0 1rem 2rem 1rem;
    }

    .form-grid {
      grid-template-columns: 1fr;
    }

    .action-buttons {
      flex-direction: column;
    }

    .booking-summary,
    .form-section,
    .form-footer {
      padding: 1rem;
    }
  }

  @media (max-width: 480px) {
    .booking-header {
      padding: 0.75rem;
    }

    .booking-title {
      font-size: 1.25rem;
    }

    .requirement-card {
      padding: 0.75rem 1rem;
    }
  }
</style>
<div class="booking-container">
  <div class="booking-header">
    <button class="back-btn">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="header-content">
      <h1 class="booking-title">Complete Your Booking</h1>
      <p class="booking-subtitle">Fill in your details to book</p>
    </div>
  </div>

  <div class="booking-requirements">
    <div class="requirement-card">
      <i class="fas fa-info-circle"></i>
      <div class="requirement-content">
        <strong>Booking Requirements:</strong>
      </div>
    </div>
  </div>

  <div class="main-content">
    <div class="booking-summary-container">
      <div class="booking-summary">
        <div class="summary-header">
          <i class="fas fa-map-marker-alt"></i>
          <h3>Booking Summary</h3>
        </div>

        <div class="package-info">
          <div class="package-details">
            <h4 class="package-name">{{ item.name }}</h4>
            <p class="package-type">
              {{ item.type === "package" ? "Package" : "Destination" }}
            </p>
            <p class="package-location" *ngIf="item.location || item.country">
              {{ item.location || item.country }}
            </p>
            <p class="package-duration" *ngIf="item.duration">
              {{ item.duration }}
            </p>
          </div>
        </div>

        <div class="price-summary">
          <div class="price-row">
            <span>Base Price</span>
            <span class="price"
              >₹{{ item.basePrice.toLocaleString("en-IN") }}</span
            >
          </div>
          <div class="price-row">
            <span>Guests</span>
            <span>{{ bookingForm.get("guests")?.value || 2 }}</span>
          </div>
          <hr class="divider" />
          <div class="price-row total">
            <span><strong>Total</strong></span>
            <span class="total-price"
              ><strong>₹{{ totalPrice.toLocaleString("en-IN") }}</strong></span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Form -->
    <div class="form-container">
      <form method="POST" novalidate class="needs-validation">
        <!-- Personal Information -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-user icon"></i>
            <h3>Personal Information</h3>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="firstName"
                >First Name <span class="required">*</span></label
              >
              <input
                name="booking[firstname]"
                type="text"
                id="firstName"
                placeholder="Enter your first name"
                class="form-control"
                required
              />

              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter your first name</div>
            </div>

            <div class="form-group">
              <label for="lastName"
                >Last Name <span class="required">*</span></label
              >
              <input
                name="booking[lastname]"
                type="text"
                id="lastName"
                placeholder="Enter your last name"
                class="form-control"
                required
              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter your last name</div>
            </div>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="email">Email <span class="required">*</span></label>
              <input
                name="booking[email]"
                type="email"
                id="email"
                class="form-control"
                placeholder="Enter your email"
                required
              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter valid email</div>
            </div>

            <div class="form-group">
              <label for="phone"
                >Phone Number <span class="required">*</span></label
              >
              <input
                name="booking[number]"
                type="number"
                id="phone"
                placeholder="Enter your phone number"
                class="form-control"
                required
              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter valid phone no</div>
            </div>
          </div>
        </div>

        <!-- Travel Details -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-calendar-alt icon"></i>
            <h3>Travel Details</h3>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="checkIn"
                >Check-in Date <span class="required">*</span></label
              >
              <input
                type="date"
                id="checkIn"
                class="form-control"
                name="booking[checkin]"
                required
              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Select check in date</div>
            </div>

            <div class="form-group">
              <label for="checkOut"
                >Check-out Date <span class="required">*</span></label
              >
              <input
                type="date"
                id="checkOut"
                class="form-control"
                name="booking[checkout]"
                required
              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Select check-out date</div>
            </div>
          </div>

          <div class="form-group">
            <label for="guests">Number of Guests</label>
            <select id="guests" class="guests-dropdown">
              <option value="1">1 Guest</option>
              <option value="2">2 Guests</option>
              <option value="3">3 Guests</option>
              <option value="4">4 Guests</option>
              <option value="5">5 Guests</option>
              <option value="6">6 Guests</option>
              <option value="7">7 Guests</option>
              <option value="8">8 Guests</option>
              <option value="9">9 Guests</option>
              <option value="10">10 Guests</option>
            </select>
          </div>
        </div>

        <!-- Emergency Contact -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-phone-alt icon"></i>
            <h3>Emergency Contact</h3>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="emergencyContact">Emergency Contact Name</label>
              <input
                type="text"
                name="booking[emergencycontact]"
                id="emergencyContact"
                placeholder="Full name of emergency contact"
                class="form-control"
              />
            </div>

            <div class="form-group">
              <label for="emergencyPhone">Emergency Contact Phone</label>
              <input
                type="number"
                name="booking[emergencynumber]"
                id="emergencyPhone"
                placeholder="Emergency contact phone number"
                class="form-control"
              />
            </div>
          </div>
        </div>

        <!-- Special Requests -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-comment-alt icon"></i>
            <h3>Special Requests</h3>
          </div>

          <div class="form-group">
            <label for="specialRequests"
              >Any special requirements or requests?</label
            >
            <textarea
              name="booking[specialrequest]"
              id="specialRequests"
              placeholder="Please let us know about any dietary restrictions, accessibility needs, or special occasions..."
              rows="4"
            ></textarea>
          </div>
        </div>

        <!-- Terms and Submit -->
        <div class="form-footer">
          <p class="terms-text">
            By proceeding with this booking, you agree to our terms and
            conditions. You will receive a confirmation email with detailed
            booking information.
          </p>

          <div class="action-buttons">
            <button class="btn-cancel">Cancel</button>
            <button class="btn-confirm">submit</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
